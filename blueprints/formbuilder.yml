type: fields
fields:
  # ===============================================
  # HEADLINE & DESCRIPTION
  # ===============================================
  headline_block_specific:
    type: headline
    numbered: false
    label: Headline / description
  headline:
    label: Headline
    type: text
  text:
    label: Text
    type: textarea

  # ===============================================
  # BASIC FORM SETTINGS
  # ===============================================
  headline_form_builder:
    type: headline
    numbered: false
    label: Form
  fb_form_id:
    type: text
    label: Form ID
    counter: false
    converter: slug
    translate: false
    spellcheck: false
    placeholder: my-form
    before: "#"
    width: 1/3
    help: A <strong>unique ID</strong> for your form.
    required: true
  fb_form_class:
    type: text
    label: Form Class
    counter: false
    translate: false
    spellcheck: false
    placeholder: form
    before: "."
    width: 1/3
    help: Optional CSS class to add to the &lt;form&gt; element.
  fb_builder:
    type: builder
    label: Form Fields
    fieldsets:
      fb_text: formbuilder/blocks/fb_text
      fb_textarea: formbuilder/blocks/fb_textarea
      fb_email: formbuilder/blocks/fb_email
      fb_tel: formbuilder/blocks/fb_tel
      fb_number: formbuilder/blocks/fb_number
      fb_url: formbuilder/blocks/fb_url
      fb_checkbox: formbuilder/blocks/fb_checkbox
      fb_radio: formbuilder/blocks/fb_radio
      fb_select: formbuilder/blocks/fb_select
      fb_date: formbuilder/blocks/fb_date
      fb_time: formbuilder/blocks/fb_time
      fb_password: formbuilder/blocks/fb_password
      fb_hidden: formbuilder/blocks/fb_hidden
      fb_honeypot: formbuilder/blocks/fb_honeypot
      fb_line: formbuilder/blocks/fb_line
      fb_displaytext: formbuilder/blocks/fb_displaytext
  fb_submit_label:
    type: text
    label: 'Submit' Button Label
    placeholder: Send
    counter: false
    width: 1/3
  fb_cancel_label:
    type: text
    label: 'Reset' Button label
    placeholder: Reset
    counter: false
    width: 1/3
    help: Leave empty to omit the button from the form.
  fb_formbtns_class:
    type: text
    label: Enclosing Div Class
    counter: false
    translate: false
    spellcheck: false
    placeholder: form
    before: "."
    width: 1/3
    help: Optional CSS class to add to the enclosing &lt;div&gt; element.


  # ===============================================
  # CAPTCHA
  # ===============================================
  headline_captcha:
    type: headline
    numbered: false
    label: Captcha
  fb_captcha:
    type: toggle
    label: Use hCaptcha
    translate: false
    default: false
    text:
      - no hCaptcha
      - use hCaptcha
    width: 1/3
    help: Sign up for hCaptcha <strong><a href="https://hCaptcha.com/?r=5c848162fd88">here</a></strong>.
  fb_captcha_theme:
    type: toggle
    label: hCaptcha Theme
    translate: false
    default: false
    text:
      - Light Theme
      - Dark Theme
    width: 1/3
    when:
      fb_captcha: true
  fb_captcha_secretkey:
    type: text
    label: hCaptcha 'Secret Key'
    placeholder: '0x0A00A00AA00AA0000A000b0000bA00000b0A0Ab0'
    counter: false
    width: 2/3
    when:
      fb_captcha: true
  fb_captcha_sitekey:
    type: text
    label: hCaptcha 'Site Key'
    placeholder: 'a00bbb00-000a-a0b0-a0b00000a0b0'
    counter: false
    width: 2/3
    when:
      fb_captcha: true

  # ===============================================
  # SUCCESS / ERROR ACTIONS
  # ===============================================
  headline_redirect:
    type: headline
    numbered: false
    label: Success / error actions
  fb_is_ajax:
    type: toggle
    label: "Success/Error Action"
    translate: false
    default: false
    text:
      - go to another page
      - show message in-page
    width: 1/3
  fb_msg_position:
    type: toggle
    label: Message Box Position
    translate: false
    default: false
    text:
      - bottom of the form
      - top of the form
    width: 1/3
    when:
      fb_is_ajax: true
  fb_success_page:
    type: pages
    label: Success Page
    multiple: false
    max: 1
    empty: No success page selected yet.
    width: 1/3
    image:
      query: false
    help: The page the user will go to when the form is successfully submitted.
    when:
      fb_is_ajax: false
  fb_error_page:
    type: pages
    label: Error Page
    multiple: false
    max: 1
    empty: No error page selected yet.
    width: 1/3
    image:
      query: false
    help: The page the user will go to if the form submission fails.
    when:
      fb_is_ajax: false
  fb_success_msg:
    type: textarea
    label: Success Message
    size: small
    buttons:
      - bold
      - italic
    counter: false
    placeholder: Your form was received successfully - thank you!
    help: The message that is displayed when the form is successfully submitted.
    when:
      fb_is_ajax: true
  fb_error_msg:
    type: textarea
    label: Error Message
    size: small
    buttons:
      - bold
      - italic
    counter: false
    placeholder: There was an issue sending your form data - please try again!
    help: The message that is displayed when there is an issue processing the form data.
    when:
      fb_is_ajax: true

  # ===============================================
  # EMAILS
  # ===============================================
  headline_emails:
    type: headline
    numbered: false
    label: Emails
  fb_send_email:
    type: toggle
    label: Submission Emails
    translate: false
    default: false
    text:
      - do not send emails
      - send form data via email
    width: 1/3
  fb_email_recipient:
    type: email
    label: Recipient Email Address
    placeholder: admin@example.com
    width: 2/3
    help: Email address that will receive the form emails.
    when:
      fb_send_email: true
  fb_email_subject:
    type: text
    label: Email Subject
    placeholder: "Message from {{site.title}}"
    help: 'Subject' heading of emails sent by this form - useful for filtering and archiving messages in your email app.
    when:
      fb_send_email: true

  # ===============================================
  # DOUBLE OPT-IN
  # ===============================================
  headline_doi:
    type: headline
    numbered: false
    label: Double opt-in
  fb_email_double_optin_active:
    type: toggle
    label: Send confirmation email to user (Double opt-in)
    default: true
    width: 1/3
  fb_email_double_optin_recipient:
    type: select
    label: "Recipient's Email Field"
    options: query
    query:
      # We need to overwrite the method, since the fb_builder property is now inside one of our blocks
      fetch: page.builder.toBuilderBlocks.filterBy("_key", "form").first.fb_builder.toBuilderBlocks.filterBy('_key','==','fb_email')
      text: "{{ structureItem.field_name }}"
      value: "{{ structureItem.field_name }}"
    help: Form field from which to get the recipient's email address (has to be an email field).
    width: 2/3
    when:
      fb_email_double_optin_active: true
  fb_email_double_optin_subject:
    type: text
    label: Email Subject
    placeholder: "Website name | Please confirm your email address"
    when:
      fb_email_double_optin_active: true
  fb_email_double_optin_mail_template:
    type: textarea
    label: Email template
    width: 1/2
    placeholder: |
      Hello \{\{name}},

      thanks for signing up...
    when:
      fb_email_double_optin_active: true
  fb_email_double_optin_mail_template_info:
    type: info
    label: Template guide
    text: |
      You can reference form fields by wrapping their name in *double curly brackets*.
      If the field is not available (e.g. if the user did not fill it out), it will be replaced by an empty string.
      That's why you usually only want to use required fields in the template.

      **Example:**
      If you have&#8203; a field called **"name"**, you can use it in the template like this:

      Hello \{\{name}}, it's great to have you on board.
    width: 1/2
  fb_email_double_optin_mail_template_logo:
    label: Email logo
    type: files
    multiple: false
    query: page.images
    when:
      fb_email_double_optin_active: true


  # ===============================================
  # RECEIVED SUBMISSIONS LIST
  # ===============================================
  headline_submissions:
    type: headline
    numbered: false
    label: Submissions
  fb_key_field:
    type: select
    label: Unique Field
    options: query
    query:
      fetch: page.fb_builder.toBuilderBlocks
      text: "{{ structureItem.field_name }}"
      value: "{{ structureItem.field_name }}"
    width: 1/2
    help: |
      Field that has to be unique for the submissions (e.g. an email address, so users can only signup once per email).
      Leave empty to allow for duplicate submissions.
  fb_submissions_info:
    label: Info
    type: info
    text: |
      To view, export and delete submissions, go to the ðŸ“‘ (link: /form-submissions text: form submissions overview target: _blank).
    width: 1/2
